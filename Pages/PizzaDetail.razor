@page "/pizzas/{Id}"
@* @using PizzaOrder_app.Models - _Imports.razor'da var *@
@* @using PizzaOrder_app.Services - _Imports.razor'da var *@
@* @using PizzaOrder_app.Components - _Imports.razor'da var *@
@inject PizzaService PizzaService

<PageTitle>Özelleştirme - @selectedPizza?.Name</PageTitle>

@code {
    [Parameter]
    public string Id { get; set; } = string.Empty;

    private Pizza? selectedPizza;

    // Parametre değiştiğinde veya sayfa ilk yüklendiğinde pizzayı yükle
    protected override async Task OnParametersSetAsync()
    {
        if (!string.IsNullOrEmpty(Id))
        {
            selectedPizza = await PizzaService.GetPizzaByIdAsync(Id);
        }
        else
        {
             selectedPizza = null; // ID yoksa temizle
        }
    }
}

<div class="container mt-4">
    @if (selectedPizza == null)
    {
        @if (string.IsNullOrEmpty(Id))
        {
             <p class="alert alert-warning">Lütfen menüden bir pizza seçin.</p>
        }
        else
        {
             <p class="alert alert-danger">Pizza bulunamadı (ID: @Id) veya veriler yükleniyor...</p>
        }
    }
    else
    {
        <div class="row g-4">
            <div class="col-lg-7">
                @* Pizza özelleştirme bileşeni, seçilen pizzayı parametre olarak alır *@
                <PizzaCustomizer Pizza="selectedPizza" />
            </div>
            <div class="col-lg-5">
                @* Sipariş özeti bileşeni *@
                <OrderSummary />
            </div>
        </div>
    }
</div>